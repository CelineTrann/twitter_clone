{% extends 'base.html' %}
{% block head %}
    <link rel="stylesheet" href="/static/detail-styles.css" />
    <link rel="stylesheet" href="/static/components/tweet-styles.css" />
    <link rel="stylesheet" href="/static/components/profile-header-styles.css" />

    <script src="/static/components/tweet.js"></script>
{% endblock head %}

{% block content %}
{% include 'components/profile-header.html' with profile=original_tweet.user.profile %}

<div class="detail-tweet">
    <div class="tweet-header">
        <img 
            src="https://png.pngtree.com/thumb_back/fh260/background/20210207/pngtree-gray-background-pure-color-simple-image_557025.jpg" 
            alt="profile picture" 
            class="profile-pic"
        ></img> 

        <div class="header">
            <a href="{% url 'profile' original_tweet.user.username %}"><b>{{ original_tweet.user.profile.display_name }}</b></a>
            <div class="post-username">@{{ original_tweet.user }}</div>
        </div>

        {% if original_tweet.user == request.user %}
        <div class="tweet-more-container">
            <div class="tweet-more" onclick="togglePopUp(this, event)">
                <i class="fa fa-ellipsis-h" aria-hidden="true"></i>
            </div>
            <div class="tweet-popup" id="tweet-popup">
                <a href="{% url 'delete_tweet' original_tweet.id %}" class="delete-btn">Delete</a>
            </div>
        </div>
        {% else %}
        <div class="tweet-more-placeholder"></div>
        {% endif %}
    </div>

    <p class="tweet-content">{{ original_tweet.content }}</p>
    <p class="post-date">{{ original_tweet.created_at |date:"f A â€¢ M j, Y" }}</p>

    <div class="post-icons">
        <span class="icon comment-icon">
            <a href="" class='hover-no-underline'>
                <i class="fa fa-comment-o" aria-hidden="true"></i> 1
            </a>
        </span>
        <span class="icon {% if request.user in original_tweet.retweets.all %}retweeted-retweet-icon{% else %}retweet-icon{% endif %}">
            <a href="{% url 'retweet_tweet' original_tweet.id %}" class='hover-no-underline'>
                <i class="fa fa-retweet" aria-hidden="true"></i>
                {% if original_tweet.retweets.count > 0 %}{{ original_tweet.retweets.count }}{% endif %}
            </a>
        </span>
        <span class="icon {% if request.user in original_tweet.likes.all %}liked-heart-icon{% else %}heart-icon{% endif %}">
            <a href="{% url 'like_tweet' original_tweet.id %}" class='hover-no-underline'>
                <i class="fa {% if request.user in original_tweet.likes.all %}fa-heart{% else %}fa-heart-o{% endif %}" aria-hidden="true"></i>
                {% if original_tweet.likes.count > 0 %}{{ original_tweet.likes.count }}{% endif %}
            </a>
        </span>
        <span class="icon bar-icon">
            <a href="" class='hover-no-underline'>
                <i class="fa fa-bar-chart" aria-hidden="true"></i> 1
            </a>
        </span>
    </div>

</div>

{% endblock content %}